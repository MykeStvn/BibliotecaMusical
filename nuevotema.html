<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--IMPORTACIÓN DE BOOTSTRAP-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <title>AGREGAR NUEVO TEMA</title>
</head>
<body>
    <nav class="navbar navbar-expand-lg" >
        <div class="container-fluid">
          <a class="navbar-brand" href="menu.html"><img src="https://png.pngtree.com/png-clipart/20221027/ourmid/pngtree-music-logo-png-image_6389182.png" width="50px" alt=""></a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav" >
              <li class="nav-item" >
                <a class="nav-link active"  aria-current="page" href="menu.html">Inicio</a>
              </li>              
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  Gestionar Biblioteca
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="nuevotema.html">Agregar Tema</a></li>
                  <li><a class="dropdown-item" href="gestionartemas.html">Gestionar Temas Agregados</a></li>
                  <li><a class="dropdown-item" href="#"></a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </nav>

      <div class="banner">
        <h1>AGREGAR NUEVO TEMA</h1>
      </div>
      <div class="tarjeta">
        <form id="form-tema">
            <div class="row text-center">
                <div class="col-md-6 ">
                    <label for="nombretema"><b>Nombre del tema: </b></label>
                    <br>
                    <input type="text" class="form-control form-control-md" name="" id="nombretema" placeholder="Ingrese el nombre de la canción">                
                </div>
                <div class="col-md-6">
                    <label for="nombreartista"><b>Artista/Agrupación: </b></label>
                    <br>
                    <input type="text" class="form-control form-control-md" name="" id="nombreartista" placeholder="Ingrese el nombre del artista">                
                </div>      
                
                <div class="col-md-4">
                    <label for="aniotema"><b>Año: </b></label>                    
                    <br>
                    <input type="number" class="form-control form-control-md" name="" id="aniotema" placeholder="Ingrese el año de lanzamiento" min="1900" max="2024" maxlength="4">                
                </div>
                <div class="col-md-4">
                    <label for="duracion"><b>Duración: </b></label>
                    <br>
                    <input type="text"  class="form-control form-control-md" name="" id="duracion" placeholder="Ingrese la duración de la canción (MM:SS) (Ej: 04:10)">                
                </div>
                <div class="col-md-4">
                    <label for="Tonalidad"><b>Tonalidad: </b></label>
                    <br>
                    <input type="text"  class="form-control form-control-md" name="" id="tonalidad" placeholder="Ingrese la tonalidad (Ej: 3A, 2A)">                
                </div>    
                <div class="col-md-4">
                    <label for="album"><b>Album: </b></label>                    
                    <br>
                    <input type="text" class="form-control form-control-md" name="" id="album" placeholder="Ingrese el nombre del álbum">                
                </div>
                <div class="col-md-4">
                    <label for="genero"><b>Género Musical: </b></label>
                    <br>
                    <input type="text"  class="form-control form-control-md" name="" id="genero" placeholder="Ingrese el género al que pertenece (Ej: Pop)">                
                </div>
                <div class="col-md-4">
                    <label for="origen"><b>País de Origen: </b></label>
                    <br>
                    <input type="text"  class="form-control form-control-md" name="" id="origen" placeholder="Ingrese el origen del tema">                
                </div>  
                <div class="col-md-4">
                    <label for="calificacion"><b>Calificación: </b></label>
                    <br>
                    <input type="number" class="form-control form-control-md" name="" id="calificacion" placeholder="Ingrese la calificacion que le da al tema (1-5)" min="1" max="5">                
                </div>
                <div class="col-md-8">
                    <label for="link"><b>Link: </b></label>
                    <br>
                    <input type="text"  class="form-control form-control-md" name="" id="link" placeholder="Ingrese el link de acceso al tema">                
                </div>
                
                <div class="row" style="margin-top: 30px;">
                    
                    <div class="col text-center">
                        <button class="btn btn-outline-info" type="reset"> <!--Boton para limpiar campos-->
                            Limpiar
                        </button>
                        <button class="btn btn-outline-success" type="submit"> <!--Guardar datos-->
                            Guardar
                        </button>
                        
                        <a class="btn btn-outline-danger" href="index.html">Cancelar</a>
                    </div>
                </div>
                
            </div>
            
    
          </form>
      </div>
      
</body>
<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyBlTQaP3P4gq9w9xpbC-kg-h7oQdP-ny84",
    authDomain: "coleccion-musical.firebaseapp.com",
    projectId: "coleccion-musical",
    storageBucket: "coleccion-musical.appspot.com",
    messagingSenderId: "8453827642",
    appId: "1:8453827642:web:20e7929cc77cbc68cad903"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);

  // CONFIGURACION FIREBASE

  import {getFirestore,collection,addDoc,onSnapshot,deleteDoc,doc}
        from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  // variable para la configuracion de la db
  const db = getFirestore(app);
  // guardar todo lo del form en la constante
  const temaform = document.getElementById("form-tema");
  //llamar a la funcion addEventListener para realizar acciones cuando se aplaste el boton submit
  // creacion evento asyc asincrono
  //ojo usar el nombre de la constante que pusimos
  temaform.addEventListener("submit", async(e)=>{
        e.preventDefault();
        await addDoc(collection(db,"mibibliotecamusical"),{
            titulo: temaform.nombretema.value,
            artista: temaform.nombreartista.value,
            año: temaform.aniotema.value,
            duracion: temaform.duracion.value,
            tonalidad: temaform.tonalidad.value,
            album: temaform.album.value,
            genero: temaform.genero.value,
            origen: temaform.origen.value,            
            calificacion: temaform.calificacion.value,
            link: temaform.link.value            
        });
        temaform.reset();
    }
);
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</html>